# SESSION LOG — Compass Automation

_For static project rules and workflows, see:_  
👉 [KEY_TAKEAWAYS.md](./KEY_TAKEAWAYS.md)

---

## 🎯 Project Strategy
We run **new MVAs** through the Compass PM Work Item flow.  
- If a problem occurs → **stop, debug, fix, commit**.  
- If no problem → **continue feeding MVAs**.  
This ensures the automation grows stronger by solving real-world failures without premature refactoring.  

---

## 📝 Maintenance Instructions
- Append under a new **dated section** (`## 📅 YYYY-MM-DD`).  
- Each learning must be **comprehensive but concise** (issue → fix → outcome).  
- Limit bullets to **3–5 sentences** so they are self-contained but not verbose.  
- Do **not repeat baseline rules** — reference `KEY_TAKEAWAYS.md` if needed.  
- If guidance changes, add: ⚠️ *Update: supersedes rule from <date>*.  
- Maintain chronological order; **never delete old entries**.  
- End each session with a **1–2 sentence summary**.  

---

## 📅 Session: 2025-09-07
- **Complaint association**: Clicking complaint tile logged success but Compass didn’t advance.  
  Fix → added verification step to confirm the “Next” button or dialog change.  
  Outcome → logs now reflect true state transitions, not just clicks.  
- **Logs vs state**: Decoupled logging from assumptions; logs now describe observed state, not intended flow.  
  This prevents misleading “associated” messages when Compass hasn’t actually advanced.  
- **Context handoff**: Introduced `project_index.txt` generated by `scan_project.ps1` to map all defs/classes.  
  This prevents duplicate helpers across files and accelerates new session onboarding.  

**Summary:** Improved reliability of complaint association and made logs state-aware; added code index to maintain continuity.  

---

## 📅 Session: 2025-08-18
- **Flow exit rules**: Adjusted loop logic so each MVA iteration ends with `continue` after success.  
  Outcome → prevents accidental fallthrough into unintended branches.  
- **Completed PM rule**: Added a 30-day validity check for Completed PM Work Items.  
  Helpers → `get_create_date_workitem()` added to extract and compare `Created At`.  
  Outcome → only creates new PM when old one has expired.  
- **Nil-safe returns**: Wrapped helper calls with `or {"status":"failed", …}`.  
  Outcome → prevents `NoneType.get` crashes and keeps test flow robust.  

**Summary:** Standardized flow exits, introduced date-based PM rules, and hardened return handling.  

---

## 📅 Session: Aug 2025
- **MVA echo mismatch**: Vehicle pane sometimes dropped leading zeros.  
  Fix → normalized with `zfill(8)` and compared only last 8 digits.  
  Outcome → guaranteed consistency between test and UI.  
- **Scroll issues**: Buttons existed but weren’t clickable when off-screen.  
  Fix → added `scrollIntoView({block:'center'})` before clicks.  
  Outcome → stabilized button interactions.  
- **Complaint flo**
